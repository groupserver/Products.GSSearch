<ul tal:define="view options/view; munge_date python:modules['Products.XWFCore.XWFUtils'].munge_date">
  <tal:block tal:repeat="topic view/get_results">
    <li id="abc123" tal:attributes="id topic/topic_id">
      <a class="topic" href="#"
        tal:attributes="href string:/r/topic/${topic/last_post_id}"
        tal:content="topic/subject"/>
      <!--Files go here-->
      <span class="files" tal:condition="topic/files">
        <tal:block tal:repeat="file topic/files">
          <a href="#" title="foo"
            tal:attributes="title file/name;
              href file/url"><img src="#" tal:attributes="src file/icon"/></a>
        </tal:block>
      </span>
      <div class="tags" tal:condition="topic/keywords">
        <p class="label">Tags:</p>
        <ul>
          <tal:block tal:repeat="keyword topic/keywords">
            <li tal:content="keyword/word"></li>
          </tal:block>
        </ul>
      </div><!--tags-->
      <div class="metadata">
        <span class="groupInfo" tal:condition="not:topic/group/only">
          <a class="group" href="#" 
            tal:attributes="href topic/group/url;"
            tal:content="topic/group/name"/>
        </span>
        <tal:block condition="not:topic/group/only">
          &#8212;
        </tal:block>
        <span class="postCount">
          <span class="cardinal" tal:content="topic/num_posts"/>
          post<tal:block condition="python:topic['num_posts']&gt;1">s</tal:block> 
          in the topic
        </span>
        &#8212;
        <tal:block condition="python:topic['num_posts']&gt;1">latest</tal:block>
        post by
        <a class="name" href="#" 
          tal:attributes="href topic/last_author/url"
          tal:content="topic/last_author/name">Me!</a>
        at
        <span class="date" tal:content="python:munge_date(topic['group'], topic['last_post_date'])"/>
      </div><!--metadata-->
    </li>
  </tal:block>
</ul>

