<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="context/@@groupserver_layout/page">
  <head>
    <title metal:fill-slot="title">
      <span tal:replace="python:view.get_title()">
        I am a fish
      </span>
    </title>      

    <meta name="title" content="Standard Template for Search"/>
    <meta name="author" content="Michael JasonSmith" />
    <meta name="description" 
      content="This template is used to render the search page on GroupServer" 
    />
    <meta name="date" content="2007-04-26"/>
        
    <tal:block metal:fill-slot="javascript">
      <script type="text/javascript" 
        src="/++resource++prototype/prototype.js">&#160;</script>
      <script type="text/javascript" 
        src="/++resource++scriptaculous/scriptaculous.js">&#160;</script>
      <script type="text/javascript"
        src="/++resource++disclosureButton/disclosure_toggle.js">&#160;</script>
    </tal:block>
    
    <tal:block metal:fill-slot="style">
      <link rel="stylesheet" title="Search Stylesheet"
        href="/++resource++search.css"/>
    </tal:block>
    
  </head>
  <body>
    <tal:block metal:fill-slot="contextnavigation">
      <div id="contextnav" class="xhtml2-nl">
        <p class="label">Search</p>
        <ul>
          <li>
            <a href="#"
              tal:define="current view/only_topics_shown"
              tal:attributes="href view/only_topics_link;
                class python:current and 'current' or 'not-current'">Topics</a>
          </li>
          <li>
            <a href="#"
              tal:define="current view/only_posts_shown" 
              tal:attributes="href view/only_posts_link;
                class python:current and 'current' or 'not-current'">Posts</a>
          </li>
          <li>
            <a href="#"
              tal:define="current view/only_files_shown" 
              tal:attributes="href view/only_files_link;
                class python:current and 'current' or 'not-current'">Files</a>
          </li>
        </ul>
      </div>
    </tal:block>  
    <tal:block metal:fill-slot="body">
      <form enctype="multipart/form-data" method="get"
        action="." tal:attributes="action request/URL"
        tal:define="searchText python:view.searchText;
        groupIds python:[view.groupId];
        authorIds python:[view.authorId];
        limit python:view.limit;
        startIndex python:view.startIndex;">
        
        <p tal:content="structure view/search_description">
          The baby's blood type? Human, mostly.
        </p>
        <ul class="navigation">
          <li tal:condition="view/groupId">
            <a href="#" 
              tal:attributes="href view/all_site_search_link">Search
              all groups.</a>
          </li>
          <li tal:condition="view/only_author">
            <a href="#" title="View All Authors"
               tal:attributes="href view/all_authors_link">Show 
               all authors</a>
          </li>
        </ul>
        
        <div id="topics" tal:condition="view/view_topics">
          <h2 tal:condition="not:view/only_topics_shown">Topics</h2>
          <p tal:replace="structure provider:groupserver.TopicResults">
            The baby's blood type? Human, mostly.</p>
        </div>
        
        <div id="files" tal:condition="view/view_files">
          <h2 tal:condition="not:view/only_files_shown">Posted Files</h2>          
          <p tal:replace="structure provider:groupserver.FileResults">
            The baby's blood type? Human, mostly.</p>
        </div>

        <div id="posts" tal:condition="view/view_posts">
          <h2 tal:condition="not:view/only_posts_shown">Posts</h2>          
          <p tal:replace="structure provider:groupserver.PostResults">
            The baby's blood type? Human, mostly.</p>
        </div>
        <!--  div id="profiles" tal:condition="view/view_profiles">
          <h2 tal:condition="not:view/only_profiles_shown">Profiles</h2>          
          <p tal:replace="structure provider:groupserver.ProfileResults">
            The baby's blood type? Human, mostly.</p>
        </div-->
        <fieldset>
          <input type="text" class="text" name="searchText"
            id="searchTextBottom" title="Text to search for"
            tal:attributes="value view/searchText | nothing"/>
          <input type="submit" class="button" value="Search"/>
          <input type="hidden" name="viewTopics" value="#"
            tal:attributes="value python:'%d' % view.view_topics()"/>
          <input type="hidden" name="viewPosts" value="#"
            tal:attributes="value python: '%d' % view.view_posts()"/>
          <input type="hidden" name="viewFiles" value="#"
            tal:attributes="value python: '%d' % view.view_files()"/>
          <input type="hidden" name="viewProfiles" value="#"
            tal:attributes="value python: '%d' % view.view_profiles()"/>
          <input type="hidden" name="groupIds" value="#"
            tal:attributes="value groupIds"/> 
          <input type="hidden" name="authorId" value="#"
            tal:attributes="value view/authorId"/>
        </fieldset> 
      </form>
    </tal:block>
  </body>
</html>
